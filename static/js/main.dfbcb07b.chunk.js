(this["webpackJsonpwandering-app"]=this["webpackJsonpwandering-app"]||[]).push([[0],{57:function(e,n,t){e.exports=t(87)},79:function(e,n,t){},81:function(e,n,t){},86:function(e,n,t){},87:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(20),l=t.n(r),c=t(33),u=t(4),i=t(18),s=t(118),h=t(120),d=t(105),g=t(119),m=t(39),f=t(36),p=t.n(f);function v(e){return null!==e&&void 0!==e}function b(e){var n=0;return function(){if(n===e.length)return null;var t=e.length-n,a=Math.random()*t|0,o=e[n+a],r=e[n];return e[n]=o,e[n+a]=r,n++,o}}var E=function(e,n){var t=n.nodes[0],a=n.nodes[n.nodes.length-1],o=e.get(t);null!=o&&o.neighbours.push(n);var r=e.get(a);null!=r&&r.neighbours.push(n)},w=function(e,n){return null==e.lat||null==e.lon||null==n.lat||null==n.lon?0:function(e,n,t,a){var o=t*Math.PI/180-e*Math.PI/180,r=a*Math.PI/180-n*Math.PI/180,l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6378.137*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}(e.lat,e.lon,n.lat,n.lon)},M=function(e,n){return p.a.get("https://www.openstreetmap.org/api/0.6/map?bbox=".concat(n-.005,",").concat(e-.005,",").concat(n+.005,",").concat(e+.005)).then((function(e){var n=e.data.elements,t=new Map,a=new Map;n.forEach((function(e){"way"===e.type&&null!=e.nodes?e.nodes.forEach((function(e){var n=t.get(e);t.set(e,null!=n?n+1:1)})):"node"===e.type&&null!=e.id&&(e.neighbours=[],a.set(e.id,e))}));var o=[];return n.forEach((function(e){"way"===e.type&&null!=e.nodes&&function e(n,t,a){var o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(null==n.nodes)return[];for(var l=0,c=null!==(o=t.get(n.nodes[r]))&&void 0!==o?o:null,u=r+1;u<n.nodes.length-1;u++){var i,s=a.get(n.nodes[u]),h=null!==(i=t.get(n.nodes[u]))&&void 0!==i?i:null;if(null!=c&&null!=h&&(l+=w(c,h)),c=h,null!=s&&s>1){var d={nodes:n.nodes.slice(r,u+1),length:l};return E(t,d),[d].concat(Object(m.a)(e(n,t,a,u)))}}var g={nodes:n.nodes.slice(r),length:l};return E(t,g),[g]}(e,a,t).forEach((function(e){return o.push(e)}))})),{nodes:a,edges:o}}))};t(79);var O=function(){var e=Object(a.useState)({lat:0,lng:0,zoom:3,markers:new Array,path:new Array}),n=Object(c.a)(e,2),t=n[0],r=n[1],l={lat:t.lat,lng:t.lng};return Object(a.useEffect)((function(){new Promise((function(e,n){navigator.geolocation||n(new Error("Your browser does not support geolocation")),navigator.geolocation.getCurrentPosition((function(n){e(n)}),(function(e){n(e)}))})).then((function(e){var n=e.coords,t=n.latitude,a=n.longitude;return r((function(e){return Object(i.a)(Object(i.a)({},e),{},{lat:t,lng:a,zoom:16})})),M(t,a)})).then((function(e){var n;console.log(e);var t=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=new Map;n.nodes.forEach((function(e,n){return o.set(n,Object(i.a)(Object(i.a)({},e),{},{visited:0}))}));var r=function n(r){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=o.get(r);if(null==u)return null;if(u.visited+=1,l>t&&-1!==u.neighbours.map((function(e){return e.nodes[0]!==r?e.nodes[0]:e.nodes[e.nodes.length-1]})).indexOf(e))return{nodeIds:c,length:l};if(l>a)return null;for(var i=b(u.neighbours),s=i();null!=s;s=i()){var h=s,d=h.nodes[0]!==r?h.nodes[0]:h.nodes[h.nodes.length-1],g=o.get(d);if(null!=g&&null!=h.length&&g.visited<2){var f=n(d,l+h.length,[].concat(Object(m.a)(c),[d]));if(null!=f)return f}}return null};return r(e)}(e.edges[0].nodes[0],e,2,2.5);console.log(null===t||void 0===t?void 0:t.length);var a=null!==(n=null===t||void 0===t?void 0:t.nodeIds.map((function(n){return e.nodes.get(n)})).filter(v).map((function(e){return null!=e.lat&&null!=e.lon?[e.lat,e.lon]:null})).filter(v))&&void 0!==n?n:[];r((function(e){return Object(i.a)(Object(i.a)({},e),{},{path:a})}))})).catch((function(){return null}))}),[]),o.a.createElement(s.a,{id:"map-root",center:l,zoom:t.zoom,onlocationfound:function(e){r((function(n){return Object(i.a)(Object(i.a)({},n),{},{lat:e.latlng.lat,lng:e.latlng.lng,zoom:16})}))}},o.a.createElement(h.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.markers.map((function(e,n){return o.a.createElement(d.a,{key:n,position:e})})),o.a.createElement(g.a,{positions:t.path}))},j=t(106),y=t(54),k=t(109),I=t(110),P=t(111),z=t(117),x=t(112),S=t(113),N=t(114),q=t(115),A=t(116);t(81);var B=function(){var e=!Object(j.a)("(prefers-color-scheme: light)"),n=o.a.useMemo((function(){return Object(y.a)({palette:{type:e?"dark":"light"}})}),[e]),t=Object(u.g)(),r=Object(a.useState)(t.location.pathname.substring(1)||"map"),l=Object(c.a)(r,2),i=l[0],s=l[1];return o.a.createElement("div",{className:"app-root"},o.a.createElement(k.a,{theme:n},o.a.createElement(I.a,null),o.a.createElement(u.d,null,o.a.createElement(u.b,{path:"/map"},o.a.createElement(O,null)),o.a.createElement(u.b,{path:"/new"},"New is working"),o.a.createElement(u.b,{path:"/fav"},"Favorites is working"),o.a.createElement(u.b,{path:"/hist"},"History is working"),o.a.createElement(u.b,{path:"/more"},"More is working"),o.a.createElement(u.b,{path:"/"},o.a.createElement(u.a,{to:"/map"}))),o.a.createElement("div",null,o.a.createElement(P.a,{value:i,onChange:function(e,n){t.push("/".concat(n)),s(n)}},o.a.createElement(z.a,{label:"Map",value:"map",icon:o.a.createElement(x.a,null)}),o.a.createElement(z.a,{label:"New",value:"new",icon:o.a.createElement(S.a,null)}),o.a.createElement(z.a,{label:"Favorites",value:"fav",icon:o.a.createElement(N.a,null)}),o.a.createElement(z.a,{label:"History",value:"hist",icon:o.a.createElement(q.a,null)}),o.a.createElement(z.a,{label:"More",value:"more",icon:o.a.createElement(A.a,null)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=t(35);t(86);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C.a,{basename:"/wanderer-app"},o.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.dfbcb07b.chunk.js.map